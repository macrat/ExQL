(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{182:function(t,e,n){var content=n(317);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(31).default)("472fd62c",content,!0,{sourceMap:!1})},316:function(t,e,n){"use strict";var r=n(182);n.n(r).a},317:function(t,e,n){(t.exports=n(30)(!1)).push([t.i,".query-editor .CodeMirror{background-color:transparent!important;height:auto;width:100%}",""])},319:function(t,e,n){var map={"./af":185,"./af.js":185,"./ar":186,"./ar-dz":187,"./ar-dz.js":187,"./ar-kw":188,"./ar-kw.js":188,"./ar-ly":189,"./ar-ly.js":189,"./ar-ma":190,"./ar-ma.js":190,"./ar-sa":191,"./ar-sa.js":191,"./ar-tn":192,"./ar-tn.js":192,"./ar.js":186,"./az":193,"./az.js":193,"./be":194,"./be.js":194,"./bg":195,"./bg.js":195,"./bm":196,"./bm.js":196,"./bn":197,"./bn.js":197,"./bo":198,"./bo.js":198,"./br":199,"./br.js":199,"./bs":200,"./bs.js":200,"./ca":201,"./ca.js":201,"./cs":202,"./cs.js":202,"./cv":203,"./cv.js":203,"./cy":204,"./cy.js":204,"./da":205,"./da.js":205,"./de":206,"./de-at":207,"./de-at.js":207,"./de-ch":208,"./de-ch.js":208,"./de.js":206,"./dv":209,"./dv.js":209,"./el":210,"./el.js":210,"./en-SG":211,"./en-SG.js":211,"./en-au":212,"./en-au.js":212,"./en-ca":213,"./en-ca.js":213,"./en-gb":214,"./en-gb.js":214,"./en-ie":215,"./en-ie.js":215,"./en-il":216,"./en-il.js":216,"./en-nz":217,"./en-nz.js":217,"./eo":218,"./eo.js":218,"./es":219,"./es-do":220,"./es-do.js":220,"./es-us":221,"./es-us.js":221,"./es.js":219,"./et":222,"./et.js":222,"./eu":223,"./eu.js":223,"./fa":224,"./fa.js":224,"./fi":225,"./fi.js":225,"./fo":226,"./fo.js":226,"./fr":227,"./fr-ca":228,"./fr-ca.js":228,"./fr-ch":229,"./fr-ch.js":229,"./fr.js":227,"./fy":230,"./fy.js":230,"./ga":231,"./ga.js":231,"./gd":232,"./gd.js":232,"./gl":233,"./gl.js":233,"./gom-latn":234,"./gom-latn.js":234,"./gu":235,"./gu.js":235,"./he":236,"./he.js":236,"./hi":237,"./hi.js":237,"./hr":238,"./hr.js":238,"./hu":239,"./hu.js":239,"./hy-am":240,"./hy-am.js":240,"./id":241,"./id.js":241,"./is":242,"./is.js":242,"./it":243,"./it-ch":244,"./it-ch.js":244,"./it.js":243,"./ja":245,"./ja.js":245,"./jv":246,"./jv.js":246,"./ka":247,"./ka.js":247,"./kk":248,"./kk.js":248,"./km":249,"./km.js":249,"./kn":250,"./kn.js":250,"./ko":251,"./ko.js":251,"./ku":252,"./ku.js":252,"./ky":253,"./ky.js":253,"./lb":254,"./lb.js":254,"./lo":255,"./lo.js":255,"./lt":256,"./lt.js":256,"./lv":257,"./lv.js":257,"./me":258,"./me.js":258,"./mi":259,"./mi.js":259,"./mk":260,"./mk.js":260,"./ml":261,"./ml.js":261,"./mn":262,"./mn.js":262,"./mr":263,"./mr.js":263,"./ms":264,"./ms-my":265,"./ms-my.js":265,"./ms.js":264,"./mt":266,"./mt.js":266,"./my":267,"./my.js":267,"./nb":268,"./nb.js":268,"./ne":269,"./ne.js":269,"./nl":270,"./nl-be":271,"./nl-be.js":271,"./nl.js":270,"./nn":272,"./nn.js":272,"./pa-in":273,"./pa-in.js":273,"./pl":274,"./pl.js":274,"./pt":275,"./pt-br":276,"./pt-br.js":276,"./pt.js":275,"./ro":277,"./ro.js":277,"./ru":278,"./ru.js":278,"./sd":279,"./sd.js":279,"./se":280,"./se.js":280,"./si":281,"./si.js":281,"./sk":282,"./sk.js":282,"./sl":283,"./sl.js":283,"./sq":284,"./sq.js":284,"./sr":285,"./sr-cyrl":286,"./sr-cyrl.js":286,"./sr.js":285,"./ss":287,"./ss.js":287,"./sv":288,"./sv.js":288,"./sw":289,"./sw.js":289,"./ta":290,"./ta.js":290,"./te":291,"./te.js":291,"./tet":292,"./tet.js":292,"./tg":293,"./tg.js":293,"./th":294,"./th.js":294,"./tl-ph":295,"./tl-ph.js":295,"./tlh":296,"./tlh.js":296,"./tr":297,"./tr.js":297,"./tzl":298,"./tzl.js":298,"./tzm":299,"./tzm-latn":300,"./tzm-latn.js":300,"./tzm.js":299,"./ug-cn":301,"./ug-cn.js":301,"./uk":302,"./uk.js":302,"./ur":303,"./ur.js":303,"./uz":304,"./uz-latn":305,"./uz-latn.js":305,"./uz.js":304,"./vi":306,"./vi.js":306,"./x-pseudo":307,"./x-pseudo.js":307,"./yo":308,"./yo.js":308,"./zh-cn":309,"./zh-cn.js":309,"./zh-hk":310,"./zh-hk.js":310,"./zh-tw":311,"./zh-tw.js":311};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}r.keys=function(){return Object.keys(map)},r.resolve=o,t.exports=r,r.id=319},323:function(t,e,n){"use strict";n.r(e);var r={props:["drawer"]},o=n(22),l=Object(o.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-toolbar",{staticStyle:{"z-index":"100"},attrs:{flat:"",app:"","clipped-left":""}},[n("v-btn",{attrs:{icon:""},on:{click:function(e){return e.stopPropagation(),t.$emit("update:drawer",!t.drawer)}}},[t.drawer?n("v-icon",[t._v("chevron_left")]):n("v-icon",[t._v("menu")])],1),t._v(" "),n("v-toolbar-title",[t._v("ExQL")])],1)},[],!1,null,null,null).exports,c=(n(109),n(28),{props:["drawer"],data:function(){return{removeTimer:{},permanent:!0}},mounted:function(){var t=this;window.addEventListener("resize",function(){t.permanent=window.innerWidth>=800}),this.permanent=window.innerWidth>=800},methods:{startRemove:function(t){var e=this;this.$set(this.removeTimer,t,setTimeout(function(){e.$store.dispatch("tables/remove",{name:t}),e.$set(e.removeTimer,t,void 0)},4e3))},cancelRemove:function(t){clearTimeout(this.removeTimer[t]),this.$set(this.removeTimer,t,void 0)},open:function(t){t.match(/^[a-zA-Z_][a-zA-Z0-9_]*$/)||(t="[".concat(t,"]")),this.$emit("open",t)}}}),v=Object(o.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-navigation-drawer",{attrs:{app:"",permanent:t.permanent&&t.drawer,value:t.permanent||t.drawer},on:{input:function(e){return t.$emit("update:drawer",e)}}},[n("v-list",{attrs:{subheader:""}},[n("v-toolbar",{attrs:{flat:""}}),t._v(" "),n("v-subheader",[t._v("tables")]),t._v(" "),n("v-list-tile",{on:{click:function(e){return e.stopPropagation(),t.$emit("upload")}}},[n("v-list-tile-action",[n("v-icon",[t._v("add_box")])],1),t._v(" "),n("v-list-tile-content",[t._v("IMPORT")])],1),t._v(" "),t._l(t.$store.state.tables.list,function(e){return n("v-slide-x-transition",{key:e},[n("v-list-tile",{directives:[{name:"show",rawName:"v-show",value:void 0===t.removeTimer[e],expression:"removeTimer[name] === undefined"}],on:{click:function(n){return n.stopPropagation(),t.open(e)}}},[n("v-list-tile-action"),t._v(" "),n("v-list-tile-content",[t._v(t._s(e))]),t._v(" "),n("v-list-tile-action",[n("v-btn",{attrs:{icon:""},on:{click:function(n){return n.stopPropagation(),t.startRemove(e)}}},[n("v-icon",{attrs:{color:"gray"}},[t._v("delete")])],1)],1)],1)],1)})],2)],1),t._v(" "),t._l(t.$store.state.tables.list,function(e){return n("div",{key:e},[n("v-snackbar",{attrs:{value:void 0!==t.removeTimer[e],bottom:"",timeout:3e3}},[t._v("\n\t\t\tTable has removed\n\t\t\t"),n("v-btn",{attrs:{flat:""},on:{click:function(n){return t.cancelRemove(e)}}},[t._v("dismiss")])],1)],1)})],2)},[],!1,null,null,null).exports,d=n(0),h=(n(312),n(24),n(2)),f=(n(38),n(23),n(72),n(183),{props:["value","error"],data:function(){return{focused:!1}},computed:{options:function(){return{theme:"zenburn",mode:"sql",indentWithTabs:!0,viewportMargin:1/0}}}}),m=(n(316),Object(o.a)(f,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-input",{staticClass:"query-editor v-text-field v-textarea",class:{"v-input--is-focused":t.focused},attrs:{error:t.error}},[n("no-ssr",[n("codemirror",{ref:"codemirror",staticStyle:{width:"100%"},attrs:{value:t.value,options:t.options},on:{input:function(e){return t.$emit("input",e)},focus:function(e){t.focused=!0},blur:function(e){t.focused=!1}}})],1)],1)},[],!1,null,null,null).exports),j={props:["value"],computed:{headers:function(){return this.value&&0!==this.value.length?this.value.columns.map(function(t){return{text:t.name,value:t.name,sortable:!0}}):[]}}},_=Object(o.a)(j,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-data-table",{attrs:{headers:t.headers,items:t.value},scopedSlots:t._u([{key:"items",fn:function(e){var r=e.item;return t._l(t.value.columns,function(col){return n("td",{attrs:{align:"number"===col.type?"right":"left"}},[t._v(t._s(r[col.name]))])})}}])})},[],!1,null,null,null).exports,x=n(181),y=function(t){return{responsive:!0,maintainAspectRatio:!1,legend:{display:t&&t.length<=40,position:t&&t.length>10?"right":"top",labels:{fontColor:"white"}}}},w=n(321),k=[[175,43,79],[244,128,105],[237,206,199],[116,173,143],[244,198,105],[116,162,173]];function $(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=k[t%k.length];return"rgba(".concat(n[0],", ").concat(n[1],", ").concat(n[2],", ").concat(e,")")}function O(data,t,e){return 0===data.length?{labels:[],datasets:[]}:{labels:t.x?data.map(function(e){return e[t.x]}):data.map(function(t,i){return i}),datasets:(t.ys||[]).map(function(label,i){return{label:label,data:data.map(function(t){return t[label]}),borderColor:$(i,e.border),backgroundColor:$(i,e.background)}})}}var C={extends:x.d,props:["data","x","ys"],mounted:function(){this.renderChart(this.chartData,y(this.ys))},watch:{chartData:function(){this.renderChart(this.chartData,y(this.ys))}},computed:{chartData:function(){return O(this.data,{x:this.x,ys:this.ys},{border:1,background:.1})}}},S={props:["value","x","ys"],components:{LineChart:Object(o.a)(C,void 0,void 0,!1,null,null,null).exports}},T=Object(o.a)(S,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("line-chart",{attrs:{data:t.value,x:t.x,ys:t.ys}}),t._v(" "),n("v-layout",[n("v-spacer"),t._v(" "),n("v-flex",[n("v-select",{attrs:{label:"x axis",items:t.value.columns.map(function(t){return t.name}),value:t.x,clearable:""},on:{change:function(e){return t.$emit("update:x",e)}}})],1),t._v(" "),n("v-flex",[n("v-select",{attrs:{label:"lines",items:t.value.columns.map(function(t){return t.name}),value:t.ys,multiple:""},on:{change:function(e){return t.$emit("update:ys",e)}}})],1),t._v(" "),n("v-spacer")],1)],1)},[],!1,null,null,null).exports,z={extends:x.a,props:["data","x","ys"],mounted:function(){this.renderChart(this.chartData,y(this.ys))},watch:{chartData:function(){this.renderChart(this.chartData,y(this.ys))}},computed:{chartData:function(){return O(this.data,{x:this.x,ys:this.ys},{border:0,background:1})}}},D={props:["value","x","ys"],components:{BarChart:Object(o.a)(z,void 0,void 0,!1,null,null,null).exports}},E=Object(o.a)(D,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("bar-chart",{attrs:{data:t.value,x:t.x,ys:t.ys}}),t._v(" "),n("v-layout",[n("v-spacer"),t._v(" "),n("v-flex",[n("v-select",{attrs:{label:"x axis",items:t.value.columns.map(function(t){return t.name}),value:t.x,clearable:""},on:{change:function(e){return t.$emit("update:x",e)}}})],1),t._v(" "),n("v-flex",[n("v-select",{attrs:{label:"bars",items:t.value.columns.map(function(t){return t.name}),value:t.ys,multiple:""},on:{change:function(e){return t.$emit("update:ys",e)}}})],1),t._v(" "),n("v-spacer")],1)],1)},[],!1,null,null,null).exports,R={extends:x.b,props:["data","x","y","r","c"],mounted:function(){this.renderChart(this.chartData,y(this.data))},watch:{chartData:function(){this.renderChart(this.chartData,y(this.data))}},computed:{chartData:function(){return data=this.data,t={x:this.x,y:this.y,r:this.r,c:this.c},e={border:1,background:.1},0===data.length?{datasets:[]}:{datasets:Object(w.a)(new Set(data.map(function(e){return e[t.c]}))).map(function(n,i){return{label:n||"",data:data.filter(function(e){return e[t.c]===n}).map(function(e){return{x:t.x?e[t.x]:0,y:t.y?e[t.y]:0,r:t.r?e[t.r]:5}}),borderColor:$(i,e.border),backgroundColor:$(i,e.background)}})};var data,t,e}}},P={props:["value","x","y","r","c"],components:{BubbleChart:Object(o.a)(R,void 0,void 0,!1,null,null,null).exports}},L=Object(o.a)(P,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("bubble-chart",{attrs:{data:t.value,x:t.x,y:t.y,r:t.r,c:t.c}}),t._v(" "),n("v-layout",[n("v-spacer"),t._v(" "),n("v-flex",[n("v-select",{attrs:{label:"label",items:t.value.columns.map(function(t){return t.name}),value:t.c,clearable:""},on:{change:function(e){return t.$emit("update:c",e)}}})],1),t._v(" "),n("v-flex",[n("v-select",{attrs:{label:"x position",items:t.value.columns.map(function(t){return t.name}),value:t.x},on:{change:function(e){return t.$emit("update:x",e)}}})],1),t._v(" "),n("v-flex",[n("v-select",{attrs:{label:"y position",items:t.value.columns.map(function(t){return t.name}),value:t.y},on:{change:function(e){return t.$emit("update:y",e)}}})],1),t._v(" "),n("v-flex",[n("v-select",{attrs:{label:"circle size",items:t.value.columns.map(function(t){return t.name}),value:t.r,clearable:""},on:{change:function(e){return t.$emit("update:r",e)}}})],1),t._v(" "),n("v-spacer")],1)],1)},[],!1,null,null,null).exports,A={extends:x.c,props:["data","label","values"],mounted:function(){this.renderChart(this.chartData,y(this.data))},watch:{chartData:function(){console.log(this.label),this.renderChart(this.chartData,y(this.data))}},computed:{chartData:function(){return data=this.data,t={label:this.label,values:this.values},e={border:.9,background:.7},0===data.length?{labels:[],datasets:[]}:{labels:t.label?data.map(function(e){return e[t.label]}):data.map(function(t,i){return i}),datasets:(t.values||[]).map(function(t){return{data:data.map(function(e){return e[t]}),borderColor:data.map(function(t,i){return $(i,e.border)}),backgroundColor:data.map(function(t,i){return $(i,e.background)})}})};var data,t,e}}},M={props:["value","label","values"],components:{DoughnutChart:Object(o.a)(A,void 0,void 0,!1,null,null,null).exports}},V={props:["value"],components:{QueryEditor:m,TableViewer:_,LineViewer:T,BarViewer:E,BubbleViewer:L,DoughnutViewer:Object(o.a)(M,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("doughnut-chart",{attrs:{data:t.value,label:t.label,values:t.values}}),t._v(" "),n("v-layout",[n("v-spacer"),t._v(" "),n("v-flex",[n("v-select",{attrs:{label:"label",items:t.value.columns.map(function(t){return t.name}),value:t.label,clearable:""},on:{change:function(e){return t.$emit("update:label",e)}}})],1),t._v(" "),n("v-flex",[n("v-select",{attrs:{label:"values",items:t.value.columns.map(function(t){return t.name}),value:t.values,multiple:""},on:{change:function(e){return t.$emit("update:values",e)}}})],1),t._v(" "),n("v-spacer")],1)],1)},[],!1,null,null,null).exports},data:function(){return{active:1,label:null,values:[],bubbleOption:{x:null,y:null,r:null,c:null},error:null,lastValidCols:new Set,downloader:{url:"",name:""},removeTimer:null}},asyncComputed:{result:{default:Object.assign([],{columns:[]}),get:function(){var t=Object(h.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.$store.state.tables.stateID,t.prev=1,t.next=4,this.$sql.execute(this.value);case 4:return e=t.sent,this.error=null,t.abrupt("return",e);case 9:return t.prev=9,t.t0=t.catch(1),console.error(t.t0),this.error=t.t0,t.abrupt("return",Object.assign([],{columns:[]}));case 14:case"end":return t.stop()}},t,this,[[1,9]])}));return function(){return t.apply(this,arguments)}}()}},watch:{result:function(t){this.guessParams(t)}},mounted:function(){this.guessParams(this.result,!0)},methods:{guessParams:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(0!==t.length||e){var n=this.lastValidCols,r=new Set(t.columns.map(function(t){return t.name})),o=t.columns.filter(function(t){return"number"===t.type||"date"===t.type}).map(function(t){return t.name}).filter(function(t){return!n.has(t)});if(!this.label||!r.has(this.label)){var l=t.columns.filter(function(t){return"string"===t.type});l.length>0&&(this.label=l[0].name)}if(!this.bubbleOption.c||!r.has(this.bubbleOption.c)){var c=t.columns.filter(function(t){return"string"===t.type});c.length>0&&(this.bubbleOption.c=c[0].name)}this.values=this.values.concat(o).filter(function(t){return r.has(t)}),this.bubbleOption.x&&r.has(this.bubbleOption.x)||!(this.values.length>0)||(this.bubbleOption.x=this.values[0]),this.bubbleOption.y&&r.has(this.bubbleOption.y)||!(this.values.length>1)||(this.bubbleOption.y=this.values[1]),this.bubbleOption.r&&r.has(this.bubbleOption.r)||!(this.values.length>2)||(this.bubbleOption.r=this.values[2]),0===this.values.length&&(this.active=0),this.lastValidCols=r}},download:function(){var t=this,e=new Date,n="ExQL-".concat(String(e.getFullYear()).padStart(4,"0")).concat(String(e.getMonth()+1).padStart(2,"0")).concat(String(e.getDate()).padStart(2,"0")).concat(String(e.getHours()).padStart(2,"0")).concat(String(e.getMinutes()).padStart(2,"0")),canvas=this.$el.querySelector("canvas");canvas?(this.downloader.name=n+".png",this.downloader.url=canvas.toDataURL(),d.default.nextTick(function(){t.$refs.downloader.click()})):this.$sql.saveAs(n,this.result)},startRemove:function(){var t=this;this.removeTimer=setTimeout(function(){return t.$emit("remove")},4e3)},cancelRemove:function(){clearTimeout(this.removeTimer),this.removeTimer=null}}},I={components:{QueryCard:Object(o.a)(V,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.removeTimer?n("v-snackbar",{attrs:{value:!0,bottom:"",timeout:3e3}},[t._v("\n\tQuery card has removed\n\t"),n("v-btn",{attrs:{flat:""},on:{click:function(e){return t.cancelRemove()}}},[t._v("dismiss")])],1):n("v-flex",[n("v-card",{attrs:{flat:""}},[n("v-tabs",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[n("v-tab",[n("v-icon",[t._v("table_chart")])],1),t._v(" "),n("v-tab",[n("v-icon",[t._v("show_chart")])],1),t._v(" "),n("v-tab",[n("v-icon",[t._v("bar_chart")])],1),t._v(" "),n("v-tab",[n("v-icon",[t._v("bubble_chart")])],1),t._v(" "),n("v-tab",[n("v-icon",[t._v("pie_chart")])],1),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{icon:""},on:{click:function(e){return e.stopPropagation(),t.download(e)}}},[n("v-icon",[t._v("save_alt")])],1),t._v(" "),n("v-btn",{attrs:{icon:""},on:{click:function(e){return e.stopPropagation(),t.startRemove()}}},[n("v-icon",[t._v("close")])],1)],1),t._v(" "),n("v-card-text",[0===t.active?n("table-viewer",{attrs:{value:t.result}}):1===t.active?n("line-viewer",{attrs:{value:t.result,x:t.label,ys:t.values},on:{"update:x":function(e){t.label=e},"update:ys":function(e){t.values=e}}}):2===t.active?n("bar-viewer",{attrs:{value:t.result,x:t.label,ys:t.values},on:{"update:x":function(e){t.label=e},"update:ys":function(e){t.values=e}}}):3===t.active?n("bubble-viewer",t._b({attrs:{value:t.result}},"bubble-viewer",t.bubbleOption,!1,!0)):4===t.active?n("doughnut-viewer",{attrs:{value:t.result,label:t.label,values:t.values},on:{"update:label":function(e){t.label=e},"update:values":function(e){t.values=e}}}):t._e(),t._v(" "),n("query-editor",{attrs:{value:t.value,error:t.error},on:{input:function(e){return t.$emit("change",e)}}}),t._v(" "),null!==t.error?n("pre",{staticClass:"red--text",staticStyle:{"white-scape":"pre-wrap"},attrs:{flat:""}},[t._v(t._s(t.error))]):t._e()],1),t._v(" "),n("a",{ref:"downloader",staticStyle:{display:"none"},attrs:{href:t.downloader.url,download:t.downloader.name}})],1)],1)},[],!1,null,null,null).exports},data:function(){return{cards:[{id:0,query:"-- Write SQL here --\n\nSELECT NOW() AS date"}],lastId:0}},methods:{remove:function(t){this.cards=this.cards.filter(function(e){return e.id!==t})},focus:function(t){this.$vuetify.goTo(this.$el.querySelector('div[data-card-id="'.concat(t,'"]')))},_createForce:function(t){var e=this;this.lastId++,this.cards.push({id:this.lastId,query:t}),d.default.nextTick(function(){return e.focus(e.lastId)})},create:function(table){if(table){var t="SELECT * FROM ".concat(table),e=this.cards.filter(function(e){return e.query===t});e.length>0?this.focus(e[0].id):this._createForce(t)}else this._createForce("")}}},F=Object(o.a)(I,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:"","grid-list-md":""}},[n("v-layout",{attrs:{column:""}},t._l(t.cards,function(e){return n("query-card",{key:e.id,attrs:{value:e.query,"data-card-id":e.id},on:{change:function(t){e.query=t},remove:function(n){return t.remove(e.id)}}})}),1),t._v(" "),n("v-fab-transition",[n("v-btn",{attrs:{fab:"",fixed:"",bottom:"",right:"",light:""},on:{click:function(e){return e.stopPropagation(),t.create()}}},[n("v-icon",[t._v("add")])],1)],1)],1)},[],!1,null,null,null).exports,Q=(n(53),n(51),n(77),n(75),n(76),n(52),n(37)),N=(n(118),n(320)),W=n.n(N),U={data:function(){return{shown:!1,file:{name:"debug.csv"},data:[],options:{headers:!0,separator:",",columns:{}},valid:!0}},computed:{headers:function(){return Object.entries(this.options.columns).map(function(t){var e=Object(Q.a)(t,2),n=e[0];return{text:e[1],value:n,sortable:!1}}).filter(function(t){return t.text})}},watch:{"options.headers":function(){this.loaded()},"options.separator":function(){this.loaded()}},methods:{storeTable:function(){var t=Object(h.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.$store.dispatch("tables/load",{file:this.file,options:this.options}),this.shown=!1,this.$emit("loaded",this.file.name);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),loaded:function(){var t=Object(h.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.shown=!0,t.next=3,this.$sql.previewTable(this.file,this.options);case 3:this.data=t.sent,this.options.columns=Object.keys(this.data[0]).reduce(function(t,e){return t[e]=e,t},{});case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),selected:function(t){var e=this,n=t.target.files,r=t.srcElement,o=!0,l=!1,c=void 0;try{for(var v,d=function(){var t=v.value,n=W.a.basename(t.name,W.a.extname(t.name)),r=t.type;switch(W.a.extname(t.name)){case".xls":r="application/vnd.ms-excel";break;case".csv":r="text/csv"}if(e.$store.state.tables.list.includes(n)){for(var i=2;e.$store.state.tables.list.includes("".concat(n,"_").concat(i));)i++;n="".concat(n,"_").concat(i)}n.match(/^[a-zA-Z_][a-zA-Z0-9_]*$/)||(n="[".concat(n.replace("[","(").replace("]",")"),"]"));var o=new FileReader;o.addEventListener("load",function(){console.log("loaded",n,o.result),e.file={name:n,type:r,url:o.result},e.loaded()}),o.readAsDataURL(t)},h=n[Symbol.iterator]();!(o=(v=h.next()).done);o=!0)d()}catch(t){l=!0,c=t}finally{try{o||null==h.return||h.return()}finally{if(l)throw c}}r.value=""},load:function(){this.$refs.file.click()}}},B={components:{AppHeader:l,AppDrawer:v,QueryCardList:F,TableLoader:Object(o.a)(U,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{persistent:"","no-click-animation":""},model:{value:t.shown,callback:function(e){t.shown=e},expression:"shown"}},[n("v-card",[n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-card",{staticClass:"headline",attrs:{flat:""}},[t._v(t._s(t.file.name))]),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.shown=!1}}},[n("v-icon",[t._v("close")])],1)],1),t._v(" "),n("v-form",{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-card-text",[n("div",[t._v("OPTIONS")]),t._v(" "),n("v-switch",{attrs:{label:"use header"},model:{value:t.options.headers,callback:function(e){t.$set(t.options,"headers",e)},expression:"options.headers"}}),t._v(" "),"text/csv"==t.file.type?n("v-text-field",{attrs:{label:"separator",placeholder:","},model:{value:t.options.separator,callback:function(e){t.$set(t.options,"separator",e)},expression:"options.separator"}}):t._e()],1),t._v(" "),n("v-card-text",[n("div",[t._v("COLUMNS")]),t._v(" "),n("v-layout",{attrs:{row:"",wrap:""}},t._l(Object.entries(t.options.columns),function(e){var r=e[0];return e[1],n("v-flex",{key:r,staticStyle:{margin:"0 8px"}},[n("v-text-field",{attrs:{label:r,placeholder:"(don't use)",clearable:""},model:{value:t.options.columns[r],callback:function(e){t.$set(t.options.columns,r,e)},expression:"options.columns[from]"}})],1)}),1)],1)],1),t._v(" "),n("v-card-text",[n("div",[t._v("PREVIEW")]),t._v(" "),n("v-data-table",{attrs:{headers:t.headers,items:t.data,"rows-per-page-items":[-1],"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){var r=e.item;return t._l(t.headers,function(e){return n("td",[t._v(t._s(r[e.value]))])})}}])})],1),t._v(" "),n("v-divider"),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{flat:""},on:{click:function(e){e.stopPropagation(),t.shown=!1}}},[t._v("cancel")]),t._v(" "),n("v-btn",{attrs:{light:t.valid,disabled:!t.valid},on:{click:function(e){return e.stopPropagation(),t.storeTable(e)}}},[t._v("load")])],1)],1),t._v(" "),n("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",multiple:""},on:{change:t.selected}})],1)},[],!1,null,null,null).exports},data:function(){return{drawer:!0}}},Z=Object(o.a)(B,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{dark:""}},[n("app-header",{attrs:{drawer:t.drawer},on:{"update:drawer":function(e){t.drawer=e}}}),t._v(" "),n("app-drawer",{attrs:{drawer:t.drawer},on:{"update:drawer":function(e){t.drawer=e},upload:function(e){return t.$refs.loader.load()},open:function(e){return t.$refs.cards.create(e)}}}),t._v(" "),n("v-content",[n("query-card-list",{ref:"cards"})],1),t._v(" "),n("table-loader",{ref:"loader",on:{loaded:function(e){return t.$refs.cards.create(e)}}})],1)},[],!1,null,null,null);e.default=Z.exports}}]);